<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OGRE: Automatic Mesh LOD Generator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="ogre_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ogre-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OGRE
   &#160;<span id="projectnumber">13.6</span>
   </div>
   <div id="projectbrief">Object-Oriented Graphics Rendering Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('meshlod-generator.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Automatic Mesh LOD Generator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#meshlod-nonprog">How to use it for non-programmers</a></li>
<li class="level1"><a href="#meshlod-prog">How to use it for programmers</a></li>
<li class="level1"><a href="#meshlod-extend">Extending MeshLodGenerator</a><ul><li class="level2"><a href="#autotoc_md307">Replacing a component</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_tutorials_meshlod"></a></p>
<p>Mesh LOD allows to swap the models to Low-poly models in far distance, which makes your game faster. Ogre will automatically use Mesh LOD when you load a mesh file, which has LOD information in it. So basically you don't need to do any coding to use this feature, but you need to prepare your meshes!</p>
<p>The Mesh LOD generator can generate Low-poly models automatically from High-poly models. It implements an improved version of "A simple, fast, and effective polygon reduction algorithm" by Stan Melax <a class="el" href="citelist.html#CITEREF_melax1998simple">[11]</a>. The improvements are described in detail <a href="http://sajty.elementfx.com/progressivemesh/GSoC2012.pdf">in the GSoC2012 report</a>.</p>
<h1><a class="anchor" id="meshlod-nonprog"></a>
How to use it for non-programmers</h1>
<p>The <b>fastest way</b> to generate mesh LOD is to use OgreMeshUpgrader on the console:</p><ul>
<li>Generate autoconfigured LOD: no questions asked, just get instant performance. <div class="fragment"><div class="line">OgreMeshUpgrader -autogen athene.mesh athene_lod.mesh</div>
</div><!-- fragment --></li>
<li>Interactive mode: It will ask you for every LOD level detail and much more! <div class="fragment"><div class="line">OgreMeshUpgrader -i athene.mesh athene_lod.mesh</div>
</div><!-- fragment --></li>
<li>If you don't use stencil shadows, I would recommend disabling Edge lists, because they increase the mesh file a lot! If you load the mesh, edge lists will also stay in memory and consuming resources.</li>
<li>If you use older Ogre version, but you want to use latest LOD generator algorithm for best quality, you can get it with -V option! <div class="fragment"><div class="line">OgreMeshUpgrader -autogen -V 1.8 athene.mesh athene_lod.mesh</div>
</div><!-- fragment --></li>
</ul>
<p>The <b>best way</b> to generate mesh LOD with visual feedback is to use the Mesh Lod sample in the Sample Browser.</p><ul>
<li>Put your meshes and materials into <code>Samples/Media/models</code></li>
<li>Start up SampleBrowser and load MeshLod sample.</li>
<li>Select your mesh in the "model" combobox.</li>
<li>Change the "Reduced vertices" slider to the reduction where you want to create a LOD level.</li>
<li>Change the camera distance to the desired distance</li>
<li>Click on Add level to add the reduction amount with given distance</li>
<li>Repeat previous 3 steps to create all levels.</li>
<li>You can check the final mesh by clicking on "Show all levels". If you made the LOD perfectly, you see the triangle count dropping, when zooming out, while not seeing graphical errors.</li>
<li>If you are ready, click on "save mesh" to save the LOD into the mesh file.</li>
</ul>
<h1><a class="anchor" id="meshlod-prog"></a>
How to use it for programmers</h1>
<p>You can find lot of usage samples in <a class="el" href="namespace_ogre.html">Ogre</a>. For example MeshLod sample, MeshLodTests, MeshSerializerTests, PlayPen.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_ogre_mesh_lod_generator_8h.html">OgreMeshLodGenerator.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line">...</div>
<div class="line">new <a class="code" href="class_ogre_1_1_mesh_lod_generator.html">Ogre::MeshLodGenerator</a>();</div>
<div class="ttc" id="a_ogre_mesh_lod_generator_8h_html"><div class="ttname"><a href="_ogre_mesh_lod_generator_8h.html">OgreMeshLodGenerator.h</a></div></div>
<div class="ttc" id="aclass_ogre_1_1_mesh_lod_generator_html"><div class="ttname"><a href="class_ogre_1_1_mesh_lod_generator.html">Ogre::MeshLodGenerator</a></div><div class="ttdef"><b>Definition:</b> OgreMeshLodGenerator.h:54</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>You can create it on the stack if you donâ€™t enable lodConfig.advanced.useBackgroundQueue. Otherwise, when you free up the stack it will abort the LOD generation and you will not get any LOD for your mesh!</dd></dl>
<p>As a first step, I would recommend to read through <a class="el" href="_ogre_lod_config_8h.html">OgreLodConfig.h</a> to know all available options! LodConfig inheritance (having a base/default LodConfig) can be done with copy constructor! </p><div class="fragment"><div class="line"><a class="code" href="struct_ogre_1_1_lod_config.html">Ogre::LodConfig</a> config(mesh);</div>
<div class="line">config.createGeneratedLodLevel(5, 0.5); <span class="comment">// At 5 ogre worldspace units use 50% reduced mesh</span></div>
<div class="line">config.createGeneratedLodLevel(10, 0.75); <span class="comment">// By default, it is using DistanceLodStrategy and proportional reduction.</span></div>
<div class="line">config.createManualLodLevel(15, <span class="stringliteral">&quot;mesh_LOD3.mesh&quot;</span>); <span class="comment">// Manual level created in blender, maya or 3ds max.</span></div>
<div class="line">config.advanced.useBackgroundQueue = <span class="keyword">true</span>; <span class="comment">// Generate in background thread, later inject with framelistener.</span></div>
<div class="line"><a class="code" href="class_ogre_1_1_mesh_lod_generator.html#af6f1c4233222649f885f7d0a718fff13">Ogre::MeshLodGenerator::getSingleton</a>().<a class="code" href="class_ogre_1_1_mesh_lod_generator.html#a3cdd91b72ba29ee177e3c8714f6f07a4">generateLodLevels</a>(config);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Or you can use autoconfigured LOD:</span></div>
<div class="line"><a class="code" href="class_ogre_1_1_mesh_lod_generator.html#af6f1c4233222649f885f7d0a718fff13">Ogre::MeshLodGenerator::getSingleton</a>().<a class="code" href="class_ogre_1_1_mesh_lod_generator.html#a70146c67825ae4397ec2944faa8fad51">generateAutoconfiguredLodLevels</a>(mesh);</div>
<div class="ttc" id="aclass_ogre_1_1_mesh_lod_generator_html_a3cdd91b72ba29ee177e3c8714f6f07a4"><div class="ttname"><a href="class_ogre_1_1_mesh_lod_generator.html#a3cdd91b72ba29ee177e3c8714f6f07a4">Ogre::MeshLodGenerator::generateLodLevels</a></div><div class="ttdeci">virtual void generateLodLevels(LodConfig &amp;lodConfig, LodCollapseCostPtr cost=LodCollapseCostPtr(), LodDataPtr data=LodDataPtr(), LodInputProviderPtr input=LodInputProviderPtr(), LodOutputProviderPtr output=LodOutputProviderPtr(), LodCollapserPtr collapser=LodCollapserPtr())</div><div class="ttdoc">Generates the Lod levels for a mesh.</div></div>
<div class="ttc" id="aclass_ogre_1_1_mesh_lod_generator_html_a70146c67825ae4397ec2944faa8fad51"><div class="ttname"><a href="class_ogre_1_1_mesh_lod_generator.html#a70146c67825ae4397ec2944faa8fad51">Ogre::MeshLodGenerator::generateAutoconfiguredLodLevels</a></div><div class="ttdeci">void generateAutoconfiguredLodLevels(MeshPtr &amp;mesh)</div><div class="ttdoc">Generates the Lod levels for a mesh without configuring it.</div></div>
<div class="ttc" id="aclass_ogre_1_1_mesh_lod_generator_html_af6f1c4233222649f885f7d0a718fff13"><div class="ttname"><a href="class_ogre_1_1_mesh_lod_generator.html#af6f1c4233222649f885f7d0a718fff13">Ogre::MeshLodGenerator::getSingleton</a></div><div class="ttdeci">static MeshLodGenerator &amp; getSingleton()</div></div>
<div class="ttc" id="astruct_ogre_1_1_lod_config_html"><div class="ttname"><a href="struct_ogre_1_1_lod_config.html">Ogre::LodConfig</a></div><div class="ttdef"><b>Definition:</b> OgreLodConfig.h:128</div></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">delete</span> <a class="code" href="class_ogre_1_1_mesh_lod_generator.html#a7ecbb1aa6a5b42342af4f21fc40acc05">Ogre::MeshLodGenerator::getSingletonPtr</a>();</div>
<div class="ttc" id="aclass_ogre_1_1_mesh_lod_generator_html_a7ecbb1aa6a5b42342af4f21fc40acc05"><div class="ttname"><a href="class_ogre_1_1_mesh_lod_generator.html#a7ecbb1aa6a5b42342af4f21fc40acc05">Ogre::MeshLodGenerator::getSingletonPtr</a></div><div class="ttdeci">static MeshLodGenerator * getSingletonPtr()</div></div>
</div><!-- fragment --><h1><a class="anchor" id="meshlod-extend"></a>
Extending MeshLodGenerator</h1>
<p>MeshLodGenerator is built up of 6 components:</p><ul>
<li><a class="el" href="struct_ogre_1_1_lod_data.html">Ogre::LodData</a>: The core of the algorithm, containing the Mesh network representation.</li>
<li><a class="el" href="class_ogre_1_1_lod_collapse_cost.html">Ogre::LodCollapseCost</a>: Provides an interface for collapse cost calculation algorithms (like curvature, quadric error, profiling, outside weight, normals)</li>
<li><a class="el" href="class_ogre_1_1_lod_input_provider.html">Ogre::LodInputProvider</a>: Initializes LodData based on a source (It can be mesh or buffered(for threading)).</li>
<li><a class="el" href="class_ogre_1_1_lod_output_provider.html">Ogre::LodOutputProvider</a>: Bakes the Lod to a target (It can be mesh, buffered, mesh+compressed and buffered+compressed)</li>
<li><a class="el" href="class_ogre_1_1_lod_collapser.html">Ogre::LodCollapser</a>: This will reduce the smallest costing vertices to the requested amount of vertices. Creates/destroys faces.</li>
<li><a class="el" href="class_ogre_1_1_mesh_lod_generator.html">Ogre::MeshLodGenerator</a>: Frontend, which can receive LodConfig. It will create/run the required internal components to generate the requested LodConfig. Only this class is using the LodConfig.</li>
</ul>
<h2><a class="anchor" id="autotoc_md307"></a>
Replacing a component</h2>
<p>You can replace or inherit from any component by passing it to <a class="el" href="class_ogre_1_1_mesh_lod_generator.html#a3cdd91b72ba29ee177e3c8714f6f07a4" title="Generates the Lod levels for a mesh.">Ogre::MeshLodGenerator::generateLodLevels()</a> function as parameter.</p>
<p>For example there is a hidden feature (which can't be enabled in LodConfig) to use Quadric Error Metrics instead of Curvature to calculate collapse cost: </p><div class="fragment"><div class="line"><a class="code" href="class_ogre_1_1_mesh_lod_generator.html">Ogre::MeshLodGenerator</a> gen;</div>
<div class="line">gen.<a class="code" href="class_ogre_1_1_mesh_lod_generator.html#a3cdd91b72ba29ee177e3c8714f6f07a4">generateLodLevels</a>(config, std::make_shared&lt;LodCollapseCostQuadric&gt;());</div>
</div><!-- fragment --><p> In the above example MeshLodGenerator will use every option from LodConfig, which is not related to collapse cost. This means outsideWeight, outsideWalkAngle and profile options will be ignored.</p>
<p>Internally MeshLodGenerator uses 2 steps:</p><ul>
<li>_resolveComponents(): Creates the components which are still nullptr and configures them based on LodConfig.</li>
<li>_process(): Runs the components. This may be called on background thread depending on LodConfig. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="tutorials.html">Tutorials</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
